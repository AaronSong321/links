# Delimited continuations using handlers

sig reset0 : (Comp ({Shift0:(((a) {}~> r) {}~> r) {}-> a}, r)) {}~> r
handler reset0(m) {
  case Return(x)    -> x
  case Shift0(p, k) -> p(k)
}

fun comp() {
  var x = do Shift0(fun(k) { k(k(k(7))) });
  x * 2 + 1
}
